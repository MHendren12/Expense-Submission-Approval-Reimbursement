CREATE DATABASE expense_reimbursement;
use expense_reimbursement;

 DROP TABLE user;
 CREATE TABLE user (
  user_id int(6) UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
  user_fname varchar(20) NOT NULL,
  user_lname varchar(20) NOT NULL,
  user_email varchar(30) NOT NULL,
  user_pass varchar(64) NOT NULL,
  salt varchar(64),
  user_dob date,
  is_admin int(1),
  user_activated int(1) NOT NULL
  );
 
 CREATE TABLE userAssignment (
  userAssign_id int(6) UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT,
  userRole_id int(6) UNSIGNED NOT NULL,
  user_id int(6) UNSIGNED NOT NULL
  );
  
 CREATE TABLE userRole (
  userRole_id int(6) UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
  userRole_Name  varchar(20) NOT NULL,
  userRole_Desc varchar(200) 
  );
  
  Insert into userRole (userRole_Name, userRole_Desc) values ('Administrator','Default role for Administrator');
  Insert into userRole (userRole_Name, userRole_Desc) values ('Approver','Default role for Approver');
  Insert into userRole (userRole_Name, userRole_Desc) values ('Submitter','Default role for Submitter');
  
  drop table expense_reports;
  CREATE TABLE expense_reports(
  expense_reports_id  int(6) UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT,
  submitter_id int(6) UNSIGNED NOT NULL,
  approver_id int(6) UNSIGNED NOT NULL,
  expense_types varchar(255) NOT NULL,
  expense_fields text NOT NULL,
  submission_date datetime,
  expensereport_status varchar(15) not null
  );
  
  drop TABLE attachments;
  create table attachments(
  attachment_id int(6) AUTO_INCREMENT not null primary key,
  expenseform_id int(6) not null,
  uploadfile blob
  );
  
  drop table expensereport_history;
  create table expensereport_history(
  history_id int(6) UNSIGNED AUTO_INCREMENT not null primary key,
  expense_reports_id  int(6) UNSIGNED NOT NULL,
  reviewer_id int(6) UNSIGNED NOT NULL,
  revieweddate datetime
  );


DROP TABLE routingCondition;
create table routingCondition (
  routingCondition_id int(10) UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
  routingConditionType varchar(25),
  routingConditionType_id int(10) UNSIGNED
);

DROP TABLE routing;
create table routing (
  routing_id int(10) UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
  routingRow_id int(10) UNSIGNED NOT NULL,
  routingColumn_id int(10) UNSIGNED NOT NULL,
  routingUser_id int(10) UNSIGNED NOT NULL
);

CREATE TABLE expense_activity(
  expense_activity_id int (8) NOT NULL AUTO_INCREMENT PRIMARY KEY,
  expense_reports_id int(8) NOT NULL,
  status varchar(20)
);

